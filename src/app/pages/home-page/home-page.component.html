<app-status-dialog
    *ngIf="isStatusMode"
    [type]="statusType" [title]="statusTitle"
    [content]="statusContent"
    (destroyButtonClick)="setStatusModeFalse()">
</app-status-dialog>


<app-sort-dialog
*ngIf="isMode01" 
[orderByElementsList]="[
{value: 'classe', name: 'Classe'},
{value: 'subject', name: 'Matéria'},
{value: 'bimester', name: 'Bimestre'},
{value: 'status', name: 'Status'},
{value: 'createDate', name: 'Data'}]" 
[totalPages]="totalPages"
[orderBy]="sortBy" [direction]="direction" [pageNum]="pageNum"
(cancelButtonClick)="switchMode01()"
(confirmButtonClick)="receiveSortValues($event); switchMode01()">
</app-sort-dialog>


<app-notebook-dialog
*ngIf="isMode02"
[teacherId]="userId"
[type]="'create'" [title]="'Criar Caderneta'"
(cancelButtonClick)="switchMode02()" (confirmButtonClick)="triggerRefreshNotebooks(); switchMode02()">
</app-notebook-dialog>




<div class="home-container">
    <div [ngSwitch]="currentState">
        <div *ngSwitchCase="'loading'" class="error-container">
            <div>
                <img src="../../../assets/redo_12108539.png">
                <h1>Carregando recursos...</h1>
            </div>
        </div>




        <div *ngSwitchCase="'loaded'">
            <div class="title-container">
                <div class="user-info-container">
                    <h1 class="user-txt">Olá, {{userName}}!</h1>


                    <div class="subinfo-container">
                        <img src="../../../assets/driver-license.png">
                        <div class="role-container"><p class="role-txt">{{getRoleName()}}</p></div>
                    </div>


                    <div class="subinfo-container">
                        <img src="../../../assets/home.png">
                        <div class="role-container"><p class="role-txt">{{userInstitution?.name}}</p></div>
                    </div>
                </div>
        
        
                <div *ngIf="userRole == 'ROLE_TCHR'" class="notebook-use-container">
                    <div (click)="switchMode01()" class="notebook-sort-container gray-hover">
                        <img class="sort-img gray-hover" src="../../../assets/document.png">
                    </div>
                    <button (click)="switchMode02()" class="notebook-create-btn gray-hover">
                        <p class="plus-txt">+</p>
                        <p class="new-notebook-txt">Nova Caderneta</p>
                    </button>
                </div>
            </div>




            <div class="home-content-container">
                <app-admin-page
                *ngIf="userRole == 'ROLE_ADM' || userRole == 'ROLE_SUPER'"
                [adminId]="userId" [adminRole]="userRole"
                [institutionId]="userInstitution?.id" [institutionName]="userInstitution?.name">
                </app-admin-page>


                <app-teacher-page
                *ngIf="userRole == 'ROLE_TCHR'"
                [teacherId]="userId">
                </app-teacher-page>
            </div>
        </div>
    
    
    
    
        <div *ngSwitchCase="'error'" class="error-container">
            <div>
                <img src="../../../assets/close_12833099.png">
                <h1 class="error-title">Ops, algo deu errado :(</h1>
            </div>
            <div>
                <p class="error-txt">Algo não está funcionando como deveria, clique no botão abaixo para recarregar a página</p>
                <button (click)="refreshPage()" class="error-btn">Recarregar</button>
            </div>
        </div>
    

        <div *ngSwitchCase="'unlogged'" class="error-container">
            <div>
                <img src="../../../assets/log_6076227.png">
                <h1 class="error-title">Parece que você não está logado!</h1>
            </div>
            <div>
                <p class="error-txt">Clique no botão abaixo para realizar login ou criar uma conta</p>
                <button [routerLink]="['/login']" class="error-btn">Login/Criar</button>
            </div>
        </div>
    </div>
</div>